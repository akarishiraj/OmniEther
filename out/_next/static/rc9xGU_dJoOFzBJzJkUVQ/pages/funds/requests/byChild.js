(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+pNZ":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/funds/requests/byChild",function(){return a("pUoZ")}])},pUoZ:function(e,t,a){"use strict";a.r(t);var n=a("ln6h"),s=a.n(n),r=a("6BQ9"),o=a.n(r),l=a("eVuF"),u=a.n(l),i=a("0iUn"),c=a("sLSF"),d=a("MI3g"),p=a("a7VT"),h=a("Tit0"),g=a("q1tI"),b=a.n(g),v=a("CafY"),f=a("ikXu"),y=a("8cHP"),C=a("oZBQ"),O=a("C5IR"),w=a("AT/M"),j=a("vYYK"),M=a("TbSc"),m=a("QetY"),q=b.a.createElement,R=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r))),Object(j.a)(Object(w.a)(a),"state",{loading:!1,errorMessage:""}),Object(j.a)(Object(w.a)(a),"onApprove",(function(){var e,t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a.setState({loading:!0,errorMessage:""}),n.next=3,s.a.awrap(C.a.eth.getAccounts());case 3:return e=n.sent,t=Object(O.a)(a.props.address),n.prev=5,n.next=8,s.a.awrap(t.methods.approvefundRequestByChild(a.props.id).send({from:e[0]}));case 8:y.Router.pushRoute("getFundRequestsByChild",{contractAddress:a.props.address}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(5),a.setState({errorMessage:n.t0.message});case 14:a.setState({loading:!1});case 15:case"end":return n.stop()}}),null,null,[[5,11]])})),Object(j.a)(Object(w.a)(a),"onFinalize",(function(){var e,t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a.setState({loading:!0,errorMessage:""}),n.next=3,s.a.awrap(C.a.eth.getAccounts());case 3:return e=n.sent,t=Object(O.a)(a.props.address),n.prev=5,n.next=8,s.a.awrap(t.methods.finalizefundRequestByChild(a.props.id).send({from:e[0]}));case 8:y.Router.pushRoute("getFundRequestsByChild",{contractAddress:a.props.address}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(5),a.setState({errorMessage:n.t0.message});case 14:a.setState({loading:!1});case 15:case"end":return n.stop()}}),null,null,[[5,11]])})),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=f.a.Row,t=f.a.Cell,a=this.props,n=a.id,s=a.request;return q(e,null,q(t,null,n),q(t,null,s.requestCreator),q(t,null,s.description),q(t,null,s.value),q(t,null,s.isLastLevel.toString()),q(t,null,this.state.errorMessage?q(M.a,{error:!0,header:"Oops!",content:this.state.errorMessage}):null,s.approvedByCurrentManager?q(m.a,{color:"green",basic:!0,disabled:!0},"Approved"):q(m.a,{loading:this.state.loading,color:"teal",basic:!0,onClick:this.onApprove},"Approve")),q(t,null,this.state.errorMessage?q(M.a,{error:!0,header:"Oops!",content:this.state.errorMessage}):null,s.approvedByParentManager?q(m.a,{color:"green",basic:!0,disabled:!0},"Approved"):q(m.a,{loading:this.state.loading,color:"teal",basic:!0,onClick:this.onApprove},"Approve")),q(t,null,this.state.errorMessage?q(M.a,{error:!0,header:"Oops!",content:this.state.errorMessage}):null,s.complete?q(m.a,{color:"green",basic:!0,disabled:!0},"Finalized"):q(m.a,{loading:this.state.loading,color:"teal",basic:!0,onClick:this.onFinalize},"Finalize")))}}]),t}(g.Component),A=a("fuXp"),F=a("vFsZ"),L=a("umxb"),S=a("T5N5"),k=b.a.createElement,I=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r))),Object(j.a)(Object(w.a)(a),"state",{loading:!1,errorMessage:"",value:"",description:"",isLastLevel:"",isIssuing:"",showModal:!1,success:!1}),Object(j.a)(Object(w.a)(a),"toggleIsLastLevel",(function(){return a.setState((function(e){return{isLastLevel:!e.isLastLevel}}))})),Object(j.a)(Object(w.a)(a),"toggleIsIssuing",(function(){return a.setState((function(e){return{isIssuing:!e.isIssuing}}))})),Object(j.a)(Object(w.a)(a),"closeModal",(function(){a.setState({showModal:!1})})),Object(j.a)(Object(w.a)(a),"onSubmit",(function(e){var t,n,r,o,l,u,i,c;return s.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return e.preventDefault(),t=a.props.address,n=a.state,r=n.value,o=n.description,l=n.isLastLevel,u=n.isIssuing,a.setState({loading:!0,errorMessage:""}),d.prev=4,i=Object(O.a)(t),d.next=8,s.a.awrap(C.a.eth.getAccounts());case 8:return c=d.sent,d.next=11,s.a.awrap(i.methods.createfundRequestByChild(r,o,l,u).send({from:c[0]}));case 11:a.setState({value:"",description:"",isLastLevel:!1,isIssuing:!1,success:!0}),y.Router.replaceRoute("getFundRequestsByChild",{contractAddress:t}),d.next=18;break;case 15:d.prev=15,d.t0=d.catch(4),a.setState({errorMessage:d.t0.message});case 18:a.setState({loading:!1});case 19:case"end":return d.stop()}}),null,null,[[4,15]])})),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return k(A.a,{onClose:this.closeModal,open:this.state.showModal,trigger:k(m.a,{floated:"right",onClick:function(){e.setState({showModal:!0})},style:{marginTop:10},content:"Add Request",icon:"add circle",primary:!0})},k(A.a.Header,null,"Add Fund Request (By Child)"),k(A.a.Content,null,k(A.a.Description,null,this.state.success?k(M.a,{success:!0,header:"Congrats!",content:"Request has been added successfully"}):null,k(M.a,{warning:!0,header:"New Fund Allotment Request",content:"This request can only be added by Potential Managers of this Fund."}),k(M.a,{warning:!0,header:"Reissuing Request",content:"This request can only be added by Manager of a Child of this Fund."}),k(M.a,{warning:!0,header:"Pay Attention!",content:"Value you enter must be less than or equal to this Fund's balance"}),k(F.a,{onSubmit:this.onSubmit,error:!!this.state.errorMessage},k(F.a.Field,null,k("label",null,"Description"),k(L.a,{value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),k(F.a.Field,null,k("label",null,"Value in GovEth"),k(L.a,{label:"GovEth",labelPosition:"right",value:this.state.value,onChange:function(t){return e.setState({value:t.target.value})}})),k(F.a.Field,null,k(S.a,{onChange:this.toggleIsLastLevel,checked:this.state.isLastLevel,label:"Is this last level Fund?"})),k(F.a.Field,null,k(S.a,{onChange:this.toggleIsIssuing,checked:this.state.isIssuing,label:"Do you want tokens in an already deployed contract?"})),k(M.a,{error:!0,header:"Oops!",content:this.state.errorMessage}),k(m.a,{primary:!0,loading:this.state.loading},"Create")))))}}]),t}(g.Component),x=b.a.createElement,B=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(t,a){return x(R,{key:a,id:a,request:t,address:e.props.address})}))}},{key:"render",value:function(){var e=this,t=f.a.Header,a=f.a.Row,n=f.a.HeaderCell,s=f.a.Body;return x(v.a,{render:function(r){r.setLoading,r.setNotLoading;return x("div",null,x("h3",null,"New Child Node/Organization Creation Request (By Current Class Deputy Manager/Potential Manager of new Child Node)"),x("div",null,"Found ",e.props.requestCount," requests."),x(I,{address:e.props.address}),x(f.a,null,x(t,null,x(a,null,x(n,null,"ID"),x(n,null,"Requester"),x(n,null,"Description"),x(n,null,"Amount"),x(n,null,"Last Level"),x(n,null,"Approval ",x("br",null)," (Parent Manager)"),x(n,null,"Approval ",x("br",null)," (Current Manager)"),x(n,null,"Finalize ",x("br",null)," (Current Manager)"))),x(s,null,e.renderRows())))}})}}],[{key:"getInitialProps",value:function(e){var t,a,n,r;return s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.query.contractAddress,a=Object(O.a)(t),l.next=4,s.a.awrap(a.methods.getFundRequestByChildsCount().call());case 4:return n=l.sent,l.next=7,s.a.awrap(u.a.all(Array(o()(n)).fill().map((function(e,t){return a.methods.fundRequestsByChild(t).call()}))));case 7:return r=l.sent,l.abrupt("return",{address:t,requests:r,requestCount:n});case 9:case"end":return l.stop()}}))}}]),t}(g.Component);t.default=B}},[["+pNZ",1,2,0,3,4,5,9]]]);