(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{LEV2:function(e,t,a){"use strict";a.r(t);var n=a("ln6h"),s=a.n(n),r=a("6BQ9"),o=a.n(r),l=a("eVuF"),u=a.n(l),c=a("0iUn"),i=a("sLSF"),d=a("MI3g"),p=a("a7VT"),g=a("Tit0"),h=a("q1tI"),v=a.n(h),b=a("CafY"),f=a("ikXu"),M=a("8cHP"),y=a("oZBQ"),w=a("C5IR"),O=a("AT/M"),j=a("vYYK"),m=a("TbSc"),C=a("QetY"),q=v.a.createElement,L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r))),Object(j.a)(Object(O.a)(a),"state",{loading:!1,errorMessage:""}),Object(j.a)(Object(O.a)(a),"onApprove",(function(){var e,t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a.setState({loading:!0,errorMessage:""}),n.next=3,s.a.awrap(y.a.eth.getAccounts());case 3:return e=n.sent,t=Object(w.a)(a.props.address),n.prev=5,n.next=8,s.a.awrap(t.methods.approvefundRequestByManager(a.props.id).send({from:e[0]}));case 8:M.Router.pushRoute("getFundRequestsByManager",{contractAddress:a.props.address}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(5),a.setState({errorMessage:n.t0.message});case 14:a.setState({loading:!1});case 15:case"end":return n.stop()}}),null,null,[[5,11]])})),Object(j.a)(Object(O.a)(a),"onFinalize",(function(){var e,t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a.setState({loading:!0,errorMessage:""}),n.next=3,s.a.awrap(y.a.eth.getAccounts());case 3:return e=n.sent,t=Object(w.a)(a.props.address),n.prev=5,n.next=8,s.a.awrap(t.methods.finalizefundRequestByManager(a.props.id).send({from:e[0]}));case 8:M.Router.pushRoute("getFundRequestsByManager",{contractAddress:a.props.address}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(5),a.setState({errorMessage:n.t0.message});case 14:a.setState({loading:!1});case 15:case"end":return n.stop()}}),null,null,[[5,11]])})),a}return Object(g.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=f.a.Row,t=f.a.Cell,a=this.props,n=a.id,s=a.request;return q(e,null,q(t,null,n),q(t,null,s.requestCreator),q(t,null,s.assigned_manager),q(t,null,s.description),q(t,null,s.value),q(t,null,s.isLastLevel.toString()),q(t,null,this.state.errorMessage?q(m.a,{error:!0,header:"Oops!",content:this.state.errorMessage}):null,s.approvedByParentManager?q(C.a,{color:"green",basic:!0,disabled:!0},"Approved"):q(C.a,{loading:this.state.loading,color:"teal",basic:!0,onClick:this.onApprove},"Approve")),q(t,null,this.state.errorMessage?q(m.a,{error:!0,header:"Oops!",content:this.state.errorMessage}):null,s.complete?q(C.a,{color:"green",basic:!0,disabled:!0},"Finalized"):q(C.a,{loading:this.state.loading,color:"teal",basic:!0,onClick:this.onFinalize},"Finalize")))}}]),t}(h.Component),R=a("fuXp"),F=a("vFsZ"),S=a("umxb"),A=a("T5N5"),k=v.a.createElement,x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r))),Object(j.a)(Object(O.a)(a),"state",{loading:!1,errorMessage:"",value:"",assignedManager:"",description:"",isLastLevel:"",showModal:!1,success:!1}),Object(j.a)(Object(O.a)(a),"toggleIsLastLevel",(function(){return a.setState((function(e){return{isLastLevel:!e.isLastLevel}}))})),Object(j.a)(Object(O.a)(a),"closeModal",(function(){a.setState({showModal:!1})})),Object(j.a)(Object(O.a)(a),"onSubmit",(function(e){var t,n,r,o,l,u,c,i;return s.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return e.preventDefault(),t=a.props.address,n=a.state,r=n.value,o=n.assignedManager,l=n.description,u=n.isLastLevel,a.setState({loading:!0,errorMessage:""}),d.prev=4,c=Object(w.a)(t),d.next=8,s.a.awrap(y.a.eth.getAccounts());case 8:return i=d.sent,d.next=11,s.a.awrap(c.methods.createfundRequestByManager(o,l,r,u).send({from:i[0]}));case 11:a.setState({value:"",assignedManager:"",description:"",isLastLevel:!1,success:!0}),M.Router.replaceRoute("getFundRequestsByManager",{contractAddress:t}),d.next=18;break;case 15:d.prev=15,d.t0=d.catch(4),a.setState({errorMessage:d.t0.message});case 18:a.setState({loading:!1});case 19:case"end":return d.stop()}}),null,null,[[4,15]])})),a}return Object(g.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return k(R.a,{onClose:this.closeModal,open:this.state.showModal,trigger:k(C.a,{floated:"right",onClick:function(){e.setState({showModal:!0})},style:{marginTop:10},content:"Add Request",icon:"add circle",primary:!0})},k(R.a.Header,null,"Add Fund Request (By Manager)"),k(R.a.Content,null,k(R.a.Description,null,this.state.success?k(m.a,{success:!0,header:"Congrats!",content:"Request has been added successfully"}):null,k(m.a,{warning:!0,header:"New Fund Allotment Request",content:"This request can only be added by Manager of this Fund."}),k(m.a,{warning:!0,header:"Pay Attention!",content:"Value you enter must be less than or equal to this Fund's balance"}),k(F.a,{onSubmit:this.onSubmit,error:!!this.state.errorMessage},k(F.a.Field,null,k("label",null,"Description"),k(S.a,{value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),k(F.a.Field,null,k("label",null,"Proposed Manager"),k(S.a,{value:this.state.assignedManager,onChange:function(t){return e.setState({assignedManager:t.target.value})}})),k(F.a.Field,null,k("label",null,"Value in GovEth"),k(S.a,{label:"GovEth",labelPosition:"right",value:this.state.value,onChange:function(t){return e.setState({value:t.target.value})}})),k(F.a.Field,null,k(A.a,{onChange:this.toggleIsLastLevel,checked:this.state.isLastLevel,label:"Is this last level Fund?"})),k(m.a,{error:!0,header:"Oops!",content:this.state.errorMessage}),k(C.a,{primary:!0,loading:this.state.loading},"Create")))))}}]),t}(h.Component),B=v.a.createElement,P=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(i.a)(t,[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(t,a){return B(L,{key:a,id:a,request:t,address:e.props.address})}))}},{key:"render",value:function(){var e=this,t=f.a.Header,a=f.a.Row,n=f.a.HeaderCell,s=f.a.Body;return B(b.a,{render:function(r){r.setLoading,r.setNotLoading;return B("div",null,B("h3",null,"New Child Node Creation Request (By Current Manager)"),B("div",null,"Found ",e.props.requestCount," requests."),B(x,{address:e.props.address}),B(f.a,null,B(t,null,B(a,null,B(n,null,"ID"),B(n,null,"Requester"),B(n,null,"Proposed Manager"),B(n,null,"Description"),B(n,null,"Amount"),B(n,null,"Last Level"),B(n,null,"Approval ",B("br",null)," (Parent Manager)"),B(n,null,"Finalize ",B("br",null)," (Current Manager)"))),B(s,null,e.renderRows())))}})}}],[{key:"getInitialProps",value:function(e){var t,a,n,r;return s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.query.contractAddress,a=Object(w.a)(t),l.next=4,s.a.awrap(a.methods.getFundRequestByManagersCount().call());case 4:return n=l.sent,l.next=7,s.a.awrap(u.a.all(Array(o()(n)).fill().map((function(e,t){return a.methods.fundIssuingsByManager(t).call()}))));case 7:return r=l.sent,l.abrupt("return",{address:t,requests:r,requestCount:n});case 9:case"end":return l.stop()}}))}}]),t}(h.Component);t.default=P},M1GC:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/funds/requests/byManager",function(){return a("LEV2")}])}},[["M1GC",1,2,0,3,4,5,9]]]);